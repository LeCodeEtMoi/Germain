---
import HeaderLink from './HeaderLink.astro';
import { SITE_TITLE } from '../consts';

// URL de base pour les liens
const baseUrl = import.meta.env.BASE_URL;
const homeUrl = `${baseUrl}Germain/`;
---

<header class="navbar is-fixed-top is-light" role="navigation" aria-label="main navigation">
  <div class="container">
    <div class="navbar-brand">
      <a class="navbar-item" href="/Germain/">
        <figure class="image is-64x64 mr-2">
          <img 
            class="is-rounded" 
            src="https://upload.wikimedia.org/wikipedia/commons/thumb/1/15/Germain_-_%C5%92uvres_philosophiques%2C_1896_%28Illustration_page_4%29.jpg/1024px-Germain_-_%C5%92uvres_philosophiques%2C_1896_%28Illustration_page_4%29.jpg" 
            alt="Logo Germain"
            width="64"
            height="64"
            loading="lazy"
          />
        </figure>
        <h1 class="title is-4 mb-0">{SITE_TITLE}</h1>
      </a>

      <!-- Burger menu pour mobile -->
      <a 
        role="button" 
        class="navbar-burger" 
        aria-label="menu" 
        aria-expanded="false" 
        data-target="navbarBasicExample"
      >
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
        <span aria-hidden="true"></span>
      </a>
    </div>

    <div id="navbarBasicExample" class="navbar-menu">
      <div class="navbar-start">
        <HeaderLink href="/Germain/blog" isNavbarItem>Leçons</HeaderLink>
        <HeaderLink href="/Germain/exercices" isNavbarItem>Exercices</HeaderLink>
        <HeaderLink href="/Germain/about" isNavbarItem>À propos</HeaderLink>
      </div>

      <div class="navbar-end">
        <div class="navbar-item">
          <div class="buttons">
            <a 
              href="https://m.webtoo.ls/@astro" 
              class="button is-light" 
              target="_blank" 
              rel="noopener noreferrer"
              title="Mastodon"
            >
              <span class="icon">
                <i class="fab fa-mastodon"></i>
              </span>
              <span class="is-sr-only">Mastodon</span>
            </a>
            <a 
              href="https://github.com/LeCodeEtMoi/Germain" 
              class="button is-light" 
              target="_blank" 
              rel="noopener noreferrer"
              title="GitHub"
            >
              <span class="icon">
                <i class="fab fa-github"></i>
              </span>
              <span class="is-sr-only">GitHub</span>
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</header>

<!-- Script pour le menu burger -->
<script>
  document.addEventListener('DOMContentLoaded', () => {
    // Récupère tous les éléments avec la classe 'navbar-burger'
    const $navbarBurgers = Array.prototype.slice.call(document.querySelectorAll('.navbar-burger'), 0);

    // Vérifie s'il y a des navbar burgers
    if ($navbarBurgers.length > 0) {
      // Ajoute un événement de clic sur chacun d'eux
      $navbarBurgers.forEach(el => {
        el.addEventListener('click', () => {
          // Récupère la cible à partir de l'attribut "data-target"
          const target = el.dataset.target;
          const $target = document.getElementById(target);

          // Bascule la classe "is-active" sur le burger et le menu
          el.classList.toggle('is-active');
          if ($target) {
            $target.classList.toggle('is-active');
          }
        });
      });
    }
  });
</script>

<!-- Styles personnalisés pour le header -->
<style>
  /* Ajustements pour le header fixe */
  body {
    padding-top: 3.25rem;
  }
  
  /* Style pour le logo */
  .navbar-item img {
    max-height: 2.75rem;
  }
  
  /* Ajustement du titre dans la navbar */
  .navbar-item h1 {
    font-size: 1.5rem;
    font-weight: 600;
  }
  
  /* Animation pour le menu burger */
  .navbar-burger {
    height: auto;
  }
  
  /* Ajustement des boutons sociaux */
  .navbar-end .buttons .button {
    border: none;
  }
  
  /* Style pour les liens actifs */
  .navbar-item.is-active {
    background-color: #f5f5f5;
  }
  
  /* Responsive */
  @media screen and (max-width: 1023px) {
    .navbar-menu {
      box-shadow: none;
    }
    
    .navbar-item {
      padding: 0.75rem 1.5rem;
    }
  }
  
  /* Styles spécifiques pour le header */
  .site-title {
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--text);
  }
  
  .social-links .button {
    border: none;
    background: transparent;
  }
  
  .social-links .button:hover {
    background: rgba(0, 0, 0, 0.05);
  }
  
  @media (max-width: 768px) {
    .social-links {
      display: none;
    }
  }
</style>
