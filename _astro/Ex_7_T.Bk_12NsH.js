import{j as n}from"./jsx-runtime.D_zvdyIk.js";import{r as A}from"./index.BVOCwoKb.js";import{g as h}from"./RandomPoint3D.CnP4wnxZ.js";const j=(e,s)=>({x:e.x-s.x,y:e.y-s.y,z:e.z-s.z}),R=(e,s)=>({x:e.x+s.x,y:e.y+s.y,z:e.z+s.z}),z=(e,s)=>({x:e.x*s,y:e.y*s,z:e.z*s}),w=(e,s)=>({x:e.y*s.z-e.z*s.y,y:e.z*s.x-e.x*s.z,z:e.x*s.y-e.y*s.x}),C=(e,s)=>e.x*s.x+e.y*s.y+e.z*s.z,g=e=>e.x===0&&e.y===0&&e.z===0,$=(e,s)=>g(w(e,s)),m=(e,s)=>Math.floor(Math.random()*(s-e+1))+e;function M(){let e,s,i,r,u,a=null;const d=m(1,4);do s=h(-3,3);while(g(s));switch(e=h(-5,5),d){case 1:u="s√©cantes";do r=h(-3,3);while(g(r)||$(s,r));a=h(-5,5),e=j(a,z(s,m(-2,2))),i=j(a,z(r,m(-2,2)));break;case 2:u="parall√®les",r=z(s,m(1,2)*(Math.random()>.5?1:-1));do i=h(-5,5);while($(j(i,e),s));break;case 3:u="non coplanaires";do r=h(-3,3);while(g(r)||$(s,r));do i=h(-5,5);while(Math.abs(C(j(i,e),w(s,r)))<1e-9);break;case 4:default:u="confondues",r=z(s,m(1,2)*(Math.random()>.5?1:-1)),i=R(e,z(s,m(-3,3)));break}return{A1:e,u1:s,A2:i,u2:r,relation:u,intersectionPoint:a}}function U(){const[e,s]=A.useState(M()),[i,r]=A.useState(null),[u,a]=A.useState(null),[d,N]=A.useState({x:"",y:"",z:""}),P=()=>{s(M()),r(null),a(null),N({x:"",y:"",z:""})},E=()=>{if(i===null){a("Veuillez s√©lectionner une r√©ponse.");return}if(i===e.relation)if(e.relation==="s√©cantes"){const t=e.intersectionPoint;if(!t){a("Erreur: Le point d'intersection n'a pas √©t√© calcul√©.");return}const c=parseFloat(d.x.replace(",",".")),x=parseFloat(d.y.replace(",",".")),o=parseFloat(d.z.replace(",","."));if(isNaN(c)||isNaN(x)||isNaN(o)){a("Veuillez entrer des coordonn√©es num√©riques valides pour le point d'intersection.");return}Math.abs(c-t.x)<1e-9&&Math.abs(x-t.y)<1e-9&&Math.abs(o-t.z)<1e-9?a(`üéâ Bravo Ma√Ætre, la r√©ponse est correcte ! Le point d'intersection est bien (${t.x}; ${t.y}; ${t.z}).`):a(`‚ùå La position est correcte, mais les coordonn√©es du point d'intersection sont fausses. La bonne r√©ponse √©tait (${t.x}; ${t.y}; ${t.z}).`)}else a("üéâ Bravo Ma√Ætre, la r√©ponse est correcte !");else{const{A1:t,u1:c,A2:x,u2:o,relation:p,intersectionPoint:y}=e,f=j(x,t),b=w(c,o),I=$(c,o);let l=`‚ùå Oups, une erreur s'est gliss√©e. La bonne r√©ponse √©tait : **${p}**.`;if(l+=`

**Explication :**
`,l+=`1. On compare les vecteurs directeurs u1(${c.x}; ${c.y}; ${c.z}) et u2(${o.x}; ${o.y}; ${o.z}).
`,I)l+=`Le produit vectoriel u1 x u2 est le vecteur nul, donc les vecteurs sont colin√©aires. Les droites sont parall√®les ou confondues.
`,l+=`2. On v√©rifie si le point A1(${t.x}; ${t.y}; ${t.z}) de (d1) appartient √† (d2).
`,$(f,o)?l+="Le vecteur A1A2 est colin√©aire √† u2, donc A1 est sur (d2). Les droites sont **confondues**.":l+="Le vecteur A1A2 n'est pas colin√©aire √† u2, donc A1 n'est pas sur (d2). Les droites sont **strictement parall√®les**.";else{l+=`Les vecteurs directeurs ne sont pas colin√©aires. Les droites sont s√©cantes ou non coplanaires.
`,l+=`2. On calcule le produit mixte (A1A2 . (u1 x u2)).
`;const L=C(f,b);if(Math.abs(L)<1e-9){if(l+="Le produit mixte est nul. Les droites sont coplanaires, donc **s√©cantes**.",y){const v=y;l+=` Le point d'intersection est (${v.x}; ${v.y}; ${v.z}).`}}else l+=`Le produit mixte est non nul (${L.toFixed(2)}). Les droites sont **non coplanaires**.`}a(l)}},k=(t,c,x)=>{const o=(p,y=!1)=>{if(p===0)return"";const f=p>0?"+":"-",b=Math.abs(p);return b===1?`${y?f:p>0?"":"-"}${x}`:`${y?f:p>0?"":"-"}${b}${x}`};return n.jsx("pre",{className:"is-family-monospace has-background-light p-3",children:`{
  x = ${t.x} ${o(c.x,!0)}
  y = ${t.y} ${o(c.y,!0)}
  z = ${t.z} ${o(c.z,!0)}
(${x} ‚àà ‚Ñù)`})},{A1:S,u1:_,A2:F,u2:O}=e,V=["confondues","parall√®les","s√©cantes","non coplanaires"];return n.jsx("div",{className:"columns is-centered",children:n.jsx("div",{className:"column is-two-thirds",children:n.jsxs("div",{className:"box content",children:[n.jsx("h2",{className:"title is-4",children:"Position relative de deux droites"}),n.jsx("p",{children:"On consid√®re les droites (d1) et (d2) de repr√©sentations param√©triques :"}),n.jsxs("div",{children:[n.jsxs("div",{children:[n.jsx("strong",{children:"(d1)"}),k(S,_,"r")]}),n.jsxs("div",{className:"mt-4",children:[n.jsx("strong",{children:"(d2)"}),k(F,O,"s")]})]}),n.jsx("p",{children:"Les droites (d1) et (d2) sont :"}),n.jsx("div",{className:"control",children:V.map(t=>n.jsxs("label",{className:"radio",children:[n.jsx("input",{type:"radio",name:"relation",value:t,checked:i===t,onChange:()=>r(t)}),` ${t.charAt(0).toUpperCase()+t.slice(1)}`]},t))}),i==="s√©cantes"&&n.jsxs("div",{className:"field mt-4",children:[n.jsx("label",{className:"label",children:"Point d'intersection (x; y; z)"}),n.jsxs("div",{className:"field is-grouped",children:[n.jsx("div",{className:"control",children:n.jsx("input",{className:"input",type:"text",placeholder:"x",value:d.x,onChange:t=>N({...d,x:t.target.value})})}),n.jsx("div",{className:"control",children:n.jsx("input",{className:"input",type:"text",placeholder:"y",value:d.y,onChange:t=>N({...d,y:t.target.value})})}),n.jsx("div",{className:"control",children:n.jsx("input",{className:"input",type:"text",placeholder:"z",value:d.z,onChange:t=>N({...d,z:t.target.value})})})]})]}),n.jsxs("div",{className:"field is-grouped is-grouped-centered mt-4",children:[n.jsx("div",{className:"control",children:n.jsx("button",{className:"button is-primary",onClick:E,children:"Valider"})}),n.jsx("div",{className:"control",children:n.jsx("button",{className:"button is-light",onClick:P,children:"Nouvel exercice"})})]}),u&&n.jsxs("div",{className:`notification ${u.startsWith("üéâ")?"is-success":"is-warning"} is-light mt-4`,children:[n.jsx("button",{className:"delete",onClick:()=>a(null)}),n.jsx("div",{style:{whiteSpace:"pre-wrap"},children:u})]})]})})})}export{U as default};
